<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:tiles="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8" />
    <meta name="renderer" content="webkit|ie-comp|ie-stand" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <title>猫投鹰大数据精准营销系统 </title>
    <link rel="icon" href="images/favicon.ico"/>
    <!-- Bootstrap -->
    <link href="vendors/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <!-- Font Awesome -->
    <link href="vendors/font-awesome/css/font-awesome.min.css" rel="stylesheet"/>
    <!-- NProgress -->
    <link href="vendors/nprogress/nprogress.css" rel="stylesheet"/>
    <!-- jQuery custom content scroller -->
    <link href="vendors/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href="vendors/layui/css/layui.css" />
    <link rel="stylesheet"
          href="bootstrapvalidator-master/dist/css/bootstrapValidator.css" />
    <!-- Custom Theme Style -->
    <link href="build/css/custom.min.css" rel="stylesheet"/>
    <link href="css/index.css" rel="stylesheet"/>
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?134c98453bebb63118c0338599528041";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>

    <style type="text/css">
        <!--


        /* Clear fix */
        .clearfix {
            *zoom: 1;
        }
        .clearfix:before,
        .clearfix:after {
            display: table;
            line-height: 0;
            content: "";
        }
        .clearfix:after {
            clear: both;
        }
        /* END */
        #context {padding:5px; min-width:1024px;}

        #today-info {text-align:center; margin-top:20px;}
        #today-info .info {width:23%; height:110px; background-color:#2A3F54; float:left; margin-left:1%; border:1px dotted #FFF;}
        #today-info .info dt:first-child{background-color:#2A3F54; height:70px;}
        #today-info .info dt:first-child span{height:70px; line-height:70px;}
        #today-info .info dt:last-child{background-color:#32B9B9; height:40px; line-height:40px; font-size:12pt; color:#FFF; text-align:left; padding-left:5px;}

        #today-info .info dt .img {float:left;}
        #today-info .info dt .data {float:right; font-size:25pt; color:#FFF; margin-right:10px;}

        .photoinfo {height:300px; float:left; width:33%; margin-bottom:20px; border-bottom:2px solid #DFDFDF;}
        .onlineImg { cursor:pointer; cursor: hand; }

        #shopId {min-width:200px; padding:6px;}
        -->
    </style>
</head>

<body class="nav-md">
<div class="container body">
    <div class="main_container">
        <div th:include="common/header::header"></div>

        <!-- page content -->
        <div class="right_col" role="main">
            <div id="context">
                <form id="myFrm" name="myFrm" role="myFrm" accept-charset="UTF-8" method="post">
                    <div class="clearfix" style="border-bottom:1px solid #CCC; padding-bottom:10px;">
                        <span style="float:left"><select id="shopId" name="shopId"></select></span>
                    <span style="float:left; margin-left:20px;">
                    	<input id="myDate" name="myDate" class="layui-input" placeholder="~ 请选择日期 ~" onclick="layui.laydate({elem: this, istime: false, format: 'YYYY-MM-DD'})"
                               th:value="${endDate}" style="height:30px; line-height:30px;" />
                    </span>
                        <span style="float:left; margin-left:50px;"><input type="button" class="layui-btn" value="查询" onclick="doSelect();" /></span>
                    </div>
                </form>

                <!-- 实时客流情况 -->
                <div style="border:1px solid #2A3F54; margin-top:20px;">
                    <div style="background-color:#2A3F54; font-size:12pt; color:#FFF; padding:6px;">实时客流量统计图</div>
                    <div id="realtimeReport" style="height:300px;"></div>
                </div>
                <!-- 30天客流情况 -->
                <div style="border:1px solid #2A3F54; margin-top:20px;">
                    <div style="background-color:#2A3F54; font-size:12pt; color:#FFF; padding:6px;">最近30天客流量统计图</div>
                    <div id="weekReport" style="height:300px;"></div>
                </div>
                <!-- 用户画像 -->
                <div style="border:1px solid #2A3F54; margin-top:20px;">
                    <div style="background-color:#2A3F54; font-size:12pt; color:#FFF; padding:6px;">用户画像统计图</div>
                    <div class="clearfix">
                        <div id="sexRpt" class="photoinfo"></div>
                        <div id="ageRpt" class="photoinfo"></div>
                        <div id="identityFamilyRpt" class="photoinfo"></div>
                        <div id="shoppingRpt" class="photoinfo"></div>
                        <div id="readingRpt" class="photoinfo"></div>
                        <div id="informationRpt" class="photoinfo"></div>
                        <div id="contactRpt" class="photoinfo"></div>
                        <div id="lifeRpt" class="photoinfo"></div>
                        <div id="manageBankingRpt" class="photoinfo"></div>
                        <div id="estateRpt" class="photoinfo"></div>
                        <div id="wearingRpt" class="photoinfo"></div>
                        <div id="educationRpt" class="photoinfo"></div>
                        <div id="xxylRpt" class="photoinfo"></div>
                        <div id="carserviceRpt" class="photoinfo"></div>
                        <div id="xfdwRpt" class="photoinfo"></div>
                        <div id="financialRpt" class="photoinfo"></div>
                    </div>
                </div>
            </div>

            <div class="clearfix"></div>
            <div class="row">
                <div class="col-md-12 col-sm-12 col-xs-12">
                    <div class="x_panel">
                        <div class="x_title">
                            <h2>人口属性查询&nbsp;&nbsp;&nbsp;(查询某个移动终端人口属性相关信息情况，如性别、人生阶段、婚育、车辆等，默认显示月画像)</h2>
                            <ul class="nav navbar-right panel_toolbox">

                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                </li>
                                <li class="dropdown">
                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                    <ul class="dropdown-menu" role="menu">
                                        <li><a href="#">Settings 1</a>
                                        </li>
                                        <li><a href="#">Settings 2</a>
                                        </li>
                                    </ul>
                                </li>
                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                </li>
                            </ul>
                            <div class="clearfix"></div>
                        </div>

                        <div class="x_title">
                            <div class="layui-form-pane" style="margin-top: 5px;">
                                <form class="layui-form">
                                    <div class="layui-form-item">


                                        <div class="layui-input-inline">
                                            <input class="layui-input" placeholder="开始日" th:value="${startDate}" id="LAY_demorange_s"/>
                                        </div>
                                        <div class="layui-input-inline">
                                            <input class="layui-input" placeholder="截止日" th:value="${endDate}" id="LAY_demorange_e"/>
                                        </div>
                                        <!-- <button class="layui-btn" id="search_usertag">查询</button>  -->
                                        <input type="button" class="layui-btn" id="search_usertag" value="查询" />


                                        <!-- <div class="" style="display:inline-block;margin-left:100px;">
                                          <input type="button" class="layui-btn" value="周画像"/>
                                           <input type="button" class="layui-btn"  value="月画像"/>
                                         </div> -->
                                    </div>
                                </form>
                            </div>

                        </div>

                        <div class="x_content">
                            <br />

                            <div class="row">


                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>性别比例</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="sex_pie" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>年龄分布</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="age_category" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>婚姻比例</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="marry_pie" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>

                            </div>


                        </div>




                        <div class="x_content">
                            <br />
                            <div class="row">
                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>车辆</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="cars_pie" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel tile">
                                        <div class="x_title">
                                            <h2>职业分布</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="position_category" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>有宝宝</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="baby_category" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="x_content">
                            <br />

                            <div class="row">


                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>品牌比例</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="brand_pie" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>设备类型</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="device_category" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>


                                <div class="col-md-4 col-sm-4 col-xs-12">
                                    <div class="x_panel">
                                        <div class="x_title">
                                            <h2>设备特性</h2>
                                            <ul class="nav navbar-right panel_toolbox">
                                                <li><a class="collapse-link"><i class="fa fa-chevron-up"></i></a>
                                                </li>
                                                <li class="dropdown">
                                                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><i class="fa fa-wrench"></i></a>
                                                    <ul class="dropdown-menu" role="menu">
                                                        <li><a href="#">Settings 1</a>
                                                        </li>
                                                        <li><a href="#">Settings 2</a>
                                                        </li>
                                                    </ul>
                                                </li>
                                                <li><a class="close-link"><i class="fa fa-close"></i></a>
                                                </li>
                                            </ul>
                                            <div class="clearfix"></div>
                                        </div>
                                        <div class="x_content">
                                            <div id="device_feature_pie" style="height:350px;"></div>
                                        </div>
                                    </div>
                                </div>

                            </div>


                        </div>

                        <div class="x_content">
                            <br />
                            <div class="row" id="game_report"></div>
                        </div>
                        <div class="x_content">
                            <br />
                            <div class="row" id="consumption_report"></div>
                        </div>
                        <div class="x_content">
                            <br />
                            <div class="row" id="interest_report"></div>
                        </div>
                        <div class="x_content">
                            <br />
                            <div class="row" id="bank_report"></div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
        <div>
            <img id="canvasImage"/>
        </div>

        <div><center>
            <input type="button" class="btn btn-info" value="生成报表" onclick="uploadImage();" />
            <a  class="btn btn-success" id="downloadReport" disabled="disabled">下载报表</a>
            </center>
            </div>
        <!-- /page content -->

        <!-- footer content -->
        <footer th:include="common/footer::copy"></footer>
        <!-- /footer content -->
    </div>
</div>

    <!-- jQuery -->
<script src="vendors/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap -->
<script src="vendors/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="vendors/fastclick/lib/fastclick.js"></script>
<!-- NProgress -->
<script src="vendors/nprogress/nprogress.js"></script>
<!-- jQuery custom content scroller -->
<script src="vendors/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.concat.min.js"></script>

<!-- Custom Theme Scripts -->
<script src="build/js/custom.min.js"></script>
<script src="common/owl.js"></script>
<script type="text/javascript" src="common/echarts.min.js"></script>
<script type="text/javascript" src="common/jquery.tmpl.min.js"></script>
<script type="text/javascript" src="vendors/layui/layui.js"></script>
<script type="text/javascript" src="vendors/layer-v2.4/layer/layer.js"></script>
<script type="text/javascript" src="vendors/layui/lay/modules/laydate.js"></script>
<script type="text/javascript" src="bootstrapvalidator-master/dist/js/bootstrapValidator.js"></script>
<script type="text/javascript" src="talkingData/javascript/echartData.js"></script>
<script src="system/basicInfo.js"></script>
<script type="text/javascript" src="talkingData/javascript/index.js"></script>
<script src="report/user_document_report.js" charset="utf-8"></script>
</body>
</html>
<script>
    //<![CDATA[
    $(document).ready(function(e) {
        // 初始化店铺列表
        owl.ajaxRequest("/userShopList.do", "", function(result) {
            if(result.status == -1) {
                alert("获取数据失败！");
                return;
            }
            var list = result.data;
            for(var i = 0; i < list.length; i++) {
                if(i == 0) {
                    initData(list[i].shopId, $("#myDate").val());
                }
                $("#shopId").append("<option value='" + list[i].shopId + "'>" + list[i].shopName + "</option>");
            }
        });
        var shopId = $("#shopId").val();
        var startIme= $("#LAY_demorange_s").val();
        var endTime= $("#LAY_demorange_e").val();
        initReport(shopId,startIme,endTime);
    });

    function uploadImage(){

        var param = {
        };
        var realtimeKL = $("#realtimeReport").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["realtimeKL"]=realtimeKL;
        var thirtyDaysKL = $("#weekReport").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["thirtyDaysKL"]=thirtyDaysKL;
        var sexPie = $("#sexRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["sexPie"]=sexPie;
        var agePie = $("#ageRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["agePie"]=agePie;
        var identityFamilyPie = $("#identityFamilyRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["identityFamilyPie"]=identityFamilyPie;
        var shoppingPie = $("#shoppingRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["shoppingPie"]=shoppingPie;
        var readingPie = $("#readingRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["readingPie"]=readingPie;
        var informationPie = $("#informationRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["informationPie"]=informationPie;
        var contactPie = $("#contactRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["contactPie"]=contactPie;
        var lifePie = $("#lifeRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["lifePie"]=lifePie;
        var manageBankingPie = $("#manageBankingRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["manageBankingPie"]=manageBankingPie;

        var estatePie = $("#estateRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["estatePie"]=estatePie;
        var wearingPie = $("#wearingRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["wearingPie"]=wearingPie;

        var educationPie = $("#educationRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["educationPie"]=educationPie;

        var entertainmentPie = $("#xxylRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["entertainmentPie"]=entertainmentPie;

        var carservicePie = $("#carserviceRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["carservicePie"]=carservicePie;

        var consumptionOrientationPie = $("#xfdwRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["consumptionOrientationPie"]=consumptionOrientationPie;

        var financialPie = $("#financialRpt").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["financialPie"]=financialPie;


        var populationSexPie = $("#sex_pie").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationSexPie"]=populationSexPie;
        var populationAgePie = $("#age_category").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationAgePie"]=populationAgePie;
        var populationMarryPie = $("#marry_pie").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationMarryPie"]=populationMarryPie;

        var populationCarPie = $("#cars_pie").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationCarPie"]=populationCarPie;
        var populationCategoryPie = $("#position_category").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationCategoryPie"]=populationCategoryPie;
        var populationBabyCategoryPie = $("#baby_category").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationBabyCategoryPie"]=populationBabyCategoryPie;
        var populationBrandPie = $("#brand_pie").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationBrandPie"]=populationBrandPie;
        var populationDeviceCategoryPie = $("#device_category").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationDeviceCategoryPie"]=populationDeviceCategoryPie;
        var populationDeviceFeaturePie = $("#device_feature_pie").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["populationDeviceFeaturePie"]=populationDeviceFeaturePie;
        var xxsjPie = $("#休闲时间_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["xxsjPie"]=xxsjPie;
        var pkjsPie = $("#跑酷竞速_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["pkjsPie"]=pkjsPie;
        var bsxcPie = $("#宝石消除_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["bsxcPie"]=bsxcPie;
        var wlyxPie = $("#网络游戏_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["wlyxPie"]=wlyxPie;
        var dzsjPie = $("#动作射击_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["dzsjPie"]=dzsjPie;
        var pkqpPie = $("#扑克棋牌_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["pkqpPie"]=pkqpPie;
        var ftswPie = $("#塔防守卫_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["ftswPie"]=ftswPie;
        var etyzPie = $("#儿童益智_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["etyzPie"]=etyzPie;
        var tygdPie = $("#体育格斗_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["tygdPie"]=tygdPie;
        var jsbyPie = $("#角色扮演_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["jsbyPie"]=jsbyPie;
        var jyclPie = $("#经营策略_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["jyclPie"]=jyclPie;
        var yclPie = $("#养成类_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["yclPie"]=yclPie;
        var zbsbPie = $("#珠宝手表_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["zbsbPie"]=zbsbPie;
        var fsxmPie = $("#服饰鞋帽_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["fsxmPie"]=fsxmPie;
        var jjcjPie = $("#家居厨具_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["jjcjPie"]=jjcjPie;
        var ydjkPie = $("#运动健康_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["ydjkPie"]=ydjkPie;
        var xbPie = $("#箱包_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["xbPie"]=xbPie;
        var myypPie = $("#母婴用品_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["myypPie"]=myypPie;
        var smPie = $("#数码_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["smPie"]=smPie;
        var whjyPie = $("#文化教育_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["whjyPie"]=whjyPie;
        var hzpPie = $("#化妆品_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["hzpPie"]=hzpPie;
        var cyPie = $("#餐饮_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["cyPie"]=cyPie;
        var jydqPie = $("#家用电器_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["jydqPie"]=jydqPie;
        var xxylPie = $("#休闲娱乐_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["xxylPie"]=xxylPie;
        var shfwPie = $("#生活服务_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["pshfwPie"]=shfwPie;
        var lsmcPie = $("#零售卖场_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["lsmcPie"]=lsmcPie;
        var qcfwPie = $("#汽车服务_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["qcfwPie"]=qcfwPie;
        var ylPie = $("#医疗_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["ylPie"]=ylPie;
        var lrPie = $("#丽人_report").children("div").children("canvas")[0].toDataURL("png").substring(21);
        param["lrPie"]=lrPie;
        var qzPie = $("#亲子_report").children("div").children("canvas")[0].toDataURL("image/png").substring(21);
        param["qzPie"]=qzPie;
        var pxjgPie = $("#培训机构_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["pxjgPie"]=pxjgPie;
        var xfdwPie = $("#消费定位_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["xfdwPie"]=xfdwPie;
        var jrPie = $("#金融_report").children("div").children("canvas")[0].toDataURL("png/jpeg").substring(21);
        param["jrPie"]=jrPie;
        owl.ajaxRequest("/uploadReport.do", param, function(result) {
            if(result.status == -1) {
                alert("获取数据失败！");
                return;
            }
            if(result.status == 10000){
                alert("报表已生成，请点击下载");
            }
            var downloadUrl = result.data;
            $("#downloadReport").attr("href",downloadUrl);
            $("#downloadReport").removeAttr("disabled");

        });


    }
    //]]>

</script>